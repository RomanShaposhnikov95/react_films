(this.webpackJsonpreact_films=this.webpackJsonpreact_films||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},51:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){"use strict";c.r(t);var n,a,r=c(1),s=c.n(r),i=c(19),l=c.n(i),o=(c(37),c(38),c(39),c(5)),j=c(3),u=(c(40),c(2)),b=function(){return Object(u.jsxs)("div",{className:"footer",children:["\xa9 ",(new Date).getFullYear()," Copyright Text"]})},d=c(59),f=(c(42),function(){return Object(u.jsxs)("div",{className:"lds-roller",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})}),O=c(14),m=c(20),h=c(21),p=c(25),x=(c(30),function(){return Object(u.jsx)("div",{className:"serverError",children:Object(u.jsx)("img",{className:"serverErrorImg",src:"https://freefrontend.com/assets/img/500-error-page-html-templates/HTML-CSS-500-Internal-Error-Page.gif",alt:""})})}),g=function(e){Object(h.a)(c,e);var t=Object(p.a)(c);function c(){var e;Object(O.a)(this,c);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return Object(m.a)(c,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(u.jsx)(x,{}):this.props.children}}]),c}(r.Component),v=c(6),N=(c(43),c(8)),k=c(4),y=c(10),S=c.n(y),w=c(13),C=c(12),I=function(){return{request:function(){var e=Object(w.a)(S.a.mark((function e(t){var c,n,a,r,s,i=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,a=i.length>3&&void 0!==i[3]?i[3]:{"X-API-KEY":"b941e349-41de-4f34-b160-6e0619897a3a","Content-Type":"application/json"},e.prev=3,e.next=6,fetch(t,{method:c,body:n,headers:a});case 6:if((r=e.sent).ok){e.next=9;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(r.status));case 9:return e.next=11,r.json();case 11:return s=e.sent,e.abrupt("return",s);case 15:throw e.prev=15,e.t0=e.catch(3),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()}},F="https://kinopoiskapiunofficial.tech/api/v2.2/films/",L="https://kinopoiskapiunofficial.tech/api/v2.1/films/",T=Object(C.b)("films/fetchFilms",function(){var e=Object(w.a)(S.a.mark((function e(t){var c,n,a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.category,n=t.page,a=I(),r=a.request,e.next=4,r("".concat(F,"top?type=").concat(c,"&page=").concat(n));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=Object(C.b)("films/fetchOneFilm",function(){var e=Object(w.a)(S.a.mark((function e(t){var c,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=I(),n=c.request,e.next=3,n("".concat(F).concat(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(C.b)("films/fetchSearchByWords",function(){var e=Object(w.a)(S.a.mark((function e(t){var c,n,a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("1",t),c=t.category,n=t.page,a=I(),r=a.request,e.next=5,r("".concat(L,"search-by-keyword?keyword=").concat(c,"&page=").concat(n));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=Object(C.b)("films/fetchSearchByWordsAllResult",function(){var e=Object(w.a)(S.a.mark((function e(t){var c,n,a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("2",t),c=t.category,n=t.page,a=I(),r=a.request,e.next=5,r("".concat(L,"search-by-keyword?keyword=").concat(c,"&page=").concat(n));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=function(e){e.filmsLoadingStatus="error"},B=function(e){e.filmsLoadingStatus="loading"},R=Object(C.c)({name:"films",initialState:{films:[],filmInfo:{},filmsLoadingStatus:"null",pageNum:1,searchResult:[],loading:"null"},reducers:{clearArr:function(e,t){e.filmInfo={}}},extraReducers:(n={},Object(k.a)(n,T.pending,B),Object(k.a)(n,T.fulfilled,(function(e,t){e.filmsLoadingStatus="null",e.films=t.payload})),Object(k.a)(n,T.rejected,_),Object(k.a)(n,A.pending,B),Object(k.a)(n,A.fulfilled,(function(e,t){e.filmsLoadingStatus="null",e.filmInfo=t.payload})),Object(k.a)(n,A.rejected,_),Object(k.a)(n,E.pending,(function(e){e.loading="loading"})),Object(k.a)(n,E.fulfilled,(function(e,t){e.loading="null",e.searchResult=t.payload})),Object(k.a)(n,E.rejected,(function(e){e.loading="error"})),Object(k.a)(n,P.pending,B),Object(k.a)(n,P.fulfilled,(function(e,t){e.filmsLoadingStatus="null",e.films=t.payload})),Object(k.a)(n,P.rejected,_),n)}),M=(R.actions.clearArr,R.reducer),q=function(){var e=Object(r.useState)("none"),t=Object(v.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(""),s=Object(v.a)(a,2),i=s[0],l=s[1],j=Object(r.useState)(!0),b=Object(v.a)(j,2),O=b[0],m=b[1],h=Object(N.b)(),p=Object(N.c)((function(e){return e.allFilms})),x=p.searchResult,g=p.loading,k=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=function(e){return k.current.contains(e.target)||n("none")};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[]);var y=function(e){var t=e.target.value.trim();return l(e.target.value),e.target.value.trim().length>=1?(h(E({category:t,page:1})),m(!1),n("block")):e.target.value.trim().length<=1?(m(!0),n("none")):void 0},S=function(e,t){return"loading"===t?Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(f,{})}):"error"===t?Object(u.jsx)("p",{children:"Loading error"}):e.films&&e.films.length>0?e.films.slice(0,5).map((function(e,t){return Object(u.jsxs)(o.b,{to:"/about/".concat(e.filmId),onClick:function(){return n("block")},onBlur:function(){return n("none")},className:"searchItem",children:[Object(u.jsx)("img",{className:"resultImg",src:e.posterUrl,alt:""}),Object(u.jsxs)("div",{className:"searchInfo",children:[Object(u.jsx)("p",{className:"searchTitle",children:e.nameEn}),Object(u.jsx)("span",{className:"searchYear",children:e.year})]})]},t)})):Object(u.jsx)("div",{className:"empty",children:"Nothing found"})}(x,g);return Object(u.jsxs)("div",{className:"searchWrapper",ref:k,children:[Object(u.jsxs)("div",{className:"searchContainer",children:[Object(u.jsx)("input",{onFocus:y,value:i,onChange:y,placeholder:"Search",className:"searchInput",type:"text"}),O?Object(u.jsx)("button",{disabled:!0,className:"searchBtn",children:Object(u.jsx)(d.b,{})}):Object(u.jsx)(o.b,{to:"/films/".concat(i,"/",1),children:Object(u.jsx)("button",{onClick:function(){l(""),m(!0)},className:"searchBtn",children:Object(u.jsx)(d.b,{})})})]}),Object(u.jsx)("div",{className:"searchMenu",style:{display:"".concat(c)},children:S})]})},U=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"appContainer",children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("h1",{className:"logo",children:"React films"}),Object(u.jsx)(q,{}),Object(u.jsx)("ul",{className:"menu",children:Object(u.jsxs)(o.c,{to:"/",className:"menuItem",children:["Home",Object(u.jsx)(d.a,{})]})})]}),Object(u.jsx)("div",{className:"main",children:Object(u.jsx)(r.Suspense,{fallback:Object(u.jsx)(f,{}),children:Object(u.jsx)(g,{children:Object(u.jsx)(j.a,{})})})}),Object(u.jsx)(b,{})]})})},W=(c(51),c(24)),D=(c(31),c(26)),G=(c(52),function(e){var t=e.nameEn,c=e.posterUrl,n=e.filmId;return Object(u.jsxs)(o.b,{to:"/about/".concat(n),children:[Object(u.jsx)("img",{className:"slideImg",src:c,alt:""}),Object(u.jsx)("div",{className:"slideTitle",children:t?t.slice(0,15):"no name"})]})}),H=c(60),J=function(e){var t=e.top,c=e.info,n=t.slice(0,9);return Object(u.jsxs)("div",{className:"sliderWrapper",children:[Object(u.jsxs)(o.b,{to:"/films/".concat(c,"/",1),className:"sliderGeneralTitle",children:[Object(u.jsx)("h1",{children:e.title}),Object(u.jsx)(H.a,{className:"next"})]}),Object(u.jsxs)(D.a,{slidesPerView:"auto",className:"slider",children:[n.map((function(e,t){return Object(u.jsx)(D.b,{className:"slide",children:Object(u.jsx)(G,Object(W.a)({},e),t)},t)})),Object(u.jsx)("h1",{children:"Remonts"}),Object(u.jsx)(D.b,{className:"seeAllLink",children:Object(u.jsx)(o.b,{className:"seeAllLink",to:"/films/".concat(c,"/",1),children:"See all..."})})]})]})},Y="https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=",K=Object(C.b)("films/fetchSlider",Object(w.a)(S.a.mark((function e(){var t,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I(),c=t.request,e.next=3,c("".concat(Y,"TOP_250_BEST_FILMS&page=1"));case 3:return e.t0=e.sent,e.next=6,c("".concat(Y,"TOP_100_POPULAR_FILMS&page=1"));case 6:return e.t1=e.sent,e.next=9,c("".concat(Y,"TOP_AWAIT_FILMS&page=1"));case 9:return e.t2=e.sent,e.abrupt("return",{top250:e.t0,top100:e.t1,topAwait:e.t2});case 11:case"end":return e.stop()}}),e)})))),V=Object(C.c)({name:"slide",initialState:{slide:[],filmsLoadingStatus:"null"},reducers:{},extraReducers:(a={},Object(k.a)(a,K.pending,(function(e){e.filmsLoadingStatus="loading"})),Object(k.a)(a,K.fulfilled,(function(e,t){e.filmsLoadingStatus="null",e.slide=t.payload})),Object(k.a)(a,K.rejected,(function(e){e.filmsLoadingStatus="error"})),a)}).reducer,X=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.slide})).slide;return Object(r.useEffect)((function(){e(K())}),[e]),Object(u.jsxs)("div",{className:"sliderContainer",children:[t.top250?Object(u.jsx)(J,{top:t.top250.films,title:"Top 250",info:"TOP_250_BEST_FILMS"}):Object(u.jsx)(f,{}),t.top100?Object(u.jsx)(J,{top:t.top100.films,title:"Top 100",info:"TOP_100_POPULAR_FILMS"}):Object(u.jsx)(f,{}),t.topAwait?Object(u.jsx)(J,{top:t.topAwait.films,title:"Top Await",info:"TOP_AWAIT_FILMS"}):Object(u.jsx)(f,{})]})},z=function(){return Object(u.jsxs)("div",{className:"notFound",children:[Object(u.jsx)("h1",{className:"errorNum",children:"404"}),Object(u.jsx)("p",{className:"errorDescription",children:"Page Not Found"}),Object(u.jsx)(o.b,{to:"/",className:"backToGeneral",children:"Back To Home"})]})},Q=(c(53),c(54),function(e){var t=e.posterUrl,c=e.nameEn,n=e.rating,a=e.filmId,r=String(n).includes("%")?n.slice(0,2)/10:n;return Object(u.jsxs)(o.b,{to:"/about/".concat(a),className:"film",children:[Object(u.jsx)("img",{className:"filmImg",src:t,alt:""}),Object(u.jsx)("div",{className:"filmTitle",children:c?c.slice(0,15):"no name"}),Object(u.jsx)("div",{className:r>=9?"raitingBlock goldRaiting":"raitingBlock",children:r})]})}),Z=c(7),$=(c(55),function(e){var t=e.value,c=e.onChange,n=e.range,a=Object(j.h)().category,r=null;switch(!0){case n<7:r=Object(Z.a)(new Array(n)).map((function(e,t){return t+1}));break;case t<4:r=[1,2,3,4,5,"...",n];break;case t>n-4:r=[1,"...",n-4,n-3,n-2,n-1,n];break;default:r=[1,"...",t-1,t,t+1,"...",n]}return Object(u.jsx)("div",{className:"container",children:r.map((function(e,r){return"..."===e?Object(u.jsx)("span",{className:"dots",children:e},r):Object(u.jsx)(o.b,{to:"/films/".concat(a,"/").concat(e),className:t===e?"pageNum pageNumActive":"pageNum",onClick:function(){var t;"number"===typeof(t=e)&&t>0&&t<=n&&c(t)},children:e},r)}))})}),ee=function(){var e=Object(j.h)(),t=e.category,c=e.num,n=Object(N.c)((function(e){return e.allFilms.films.films})),a=Object(N.c)((function(e){return e.allFilms.filmsLoadingStatus})),s=Object(N.c)((function(e){return e.allFilms.films.pagesCount})),i=Object(N.b)(),l=Number(c),o=Object(r.useState)(l),b=Object(v.a)(o,2),d=b[0],O=b[1];Object(r.useEffect)((function(){t.includes("TOP")?i(T({category:t,page:d})):i(P({category:t,page:d})),O(l)}),[t,d,i,l]);var m=function(e,t){return"loading"===t?Object(u.jsx)(f,{}):"error"===t?Object(u.jsx)("p",{style:{color:"white"},children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"}):e&&e.length>0?e.map((function(e,t){return Object(u.jsx)(Q,Object(W.a)({},e),t)})):Object(u.jsx)("div",{className:"nothing",children:"Nothing Found"})}(n,a);return Object(u.jsxs)("div",{className:"allFilms",children:[Object(u.jsx)("div",{className:"films",children:m}),Object(u.jsx)("div",{className:"pagination",children:s?Object(u.jsx)($,{value:d,range:s,onChange:O}):""})]})},te=(c(56),c(57),c(61)),ce=function(e){return Object(u.jsxs)("div",{className:"raitings",children:[Object(u.jsx)(ne,{color:e.valueFromSer>0,onClick:e.onClick,value:1}),Object(u.jsx)(ne,{color:e.valueFromSer>1,onClick:e.onClick,value:2}),Object(u.jsx)(ne,{color:e.valueFromSer>2,onClick:e.onClick,value:3}),Object(u.jsx)(ne,{color:e.valueFromSer>3,onClick:e.onClick,value:4}),Object(u.jsx)(ne,{color:e.valueFromSer>4,onClick:e.onClick,value:5})]})},ne=function(e){return Object(u.jsx)("span",{onClick:function(){e.onClick(e.value)},children:e.color?Object(u.jsx)(te.a,{className:"stars"}):Object(u.jsx)(te.b,{className:"starsJust"})})},ae=function(){var e=Object(j.h)().id,t=Object(N.b)(),c=Object(N.c)((function(e){return e.allFilms})),n=c.filmInfo,a=c.filmsLoadingStatus,s=Object(j.g)(),i=function(){return s(-1)};Object(r.useEffect)((function(){t(A(e))}),[e,t]);var l=n.posterUrl,o=n.ratingKinopoisk,b=n.nameOriginal,d=n.description,O=Math.floor(o/2),m=Object(r.useState)(O),h=Object(v.a)(m,2),p=h[0],x=h[1],g=function(e,t){return"loading"===t?Object(u.jsx)(f,{}):"error"===t?Object(u.jsx)("p",{children:"Loading error"}):e?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"filmInfoPoster",children:Object(u.jsx)("img",{src:l,alt:l,className:"filInfoImg"})}),Object(u.jsxs)("div",{className:"Info",children:[Object(u.jsx)("div",{className:"infoTitle",children:b}),Object(u.jsx)("div",{className:"description",children:d}),Object(u.jsxs)("div",{className:"raiting",children:[Object(u.jsx)(ce,{valueFromSer:p,onClick:x}),Object(u.jsx)("span",{children:o})]}),Object(u.jsx)("div",{onClick:i,className:"back",children:Object(u.jsx)("p",{children:"\u2190 Back"})})]})]}):void 0}(n,a);return Object(u.jsx)("div",{className:"filmInfo",children:g})};var re=function(){return Object(u.jsx)(j.d,{children:Object(u.jsxs)(j.b,{path:"/",element:Object(u.jsx)(U,{}),children:[Object(u.jsx)(j.b,{index:!0,element:Object(u.jsx)(X,{})}),Object(u.jsx)(j.b,{path:"*",element:Object(u.jsx)(z,{})}),Object(u.jsx)(j.b,{path:"/films/:category/:num",element:Object(u.jsx)(ee,{})}),Object(u.jsx)(j.b,{path:"/about/:id",element:Object(u.jsx)(ae,{})})]})})},se=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,62)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))},ie=Object(C.a)({reducer:{slide:V,allFilms:M}});window.store=ie;var le=ie;l.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(N.a,{store:le,children:Object(u.jsx)(o.a,{children:Object(u.jsx)(re,{})})})}),document.getElementById("root")),se()}},[[58,1,2]]]);
//# sourceMappingURL=main.3a93d554.chunk.js.map