(this.webpackJsonpreact_films=this.webpackJsonpreact_films||[]).push([[0],{12:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(6),r=n.n(c),a=n(10),s="b941e349-41de-4f34-b160-6e0619897a3a",i=function(){return{request:function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c,a,i,o,u=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",c=u.length>2&&void 0!==u[2]?u[2]:null,a=u.length>3&&void 0!==u[3]?u[3]:{"X-API-KEY":s,"Content-Type":"application/json"},e.prev=3,e.next=6,fetch(t,{method:n,body:c,headers:a});case 6:if((i=e.sent).ok){e.next=9;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(i.status));case 9:return e.next=11,i.json();case 11:return o=e.sent,e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(3),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}()}}},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(42);var c=n(2),r=function(){return Object(c.jsxs)("div",{className:"lds-roller",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})}},16:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return O}));var c,r=n(4),a=n(6),s=n.n(a),i=n(10),o=n(8),u=n(12),l="https://kinopoiskapiunofficial.tech/api/v2.2/films/",j="https://kinopoiskapiunofficial.tech/api/v2.1/films/",d=Object(o.b)("films/fetchFilms",function(){var e=Object(i.a)(s.a.mark((function e(t){var n,c,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.category,c=t.page,r=Object(u.a)(),a=r.request,e.next=4,a("".concat(l,"top?type=").concat(n,"&page=").concat(c));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),f=Object(o.b)("films/fetchOneFilm",function(){var e=Object(i.a)(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(),c=n.request,e.next=3,c("".concat(l).concat(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b=Object(o.b)("films/fetchSearchByWords",function(){var e=Object(i.a)(s.a.mark((function e(t){var n,c,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("1",t),n=t.category,c=t.page,r=Object(u.a)(),a=r.request,e.next=5,a("".concat(j,"search-by-keyword?keyword=").concat(n,"&page=").concat(c));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=Object(o.b)("films/fetchSearchByWordsAllResult",function(){var e=Object(i.a)(s.a.mark((function e(t){var n,c,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("2",t),n=t.category,c=t.page,r=Object(u.a)(),a=r.request,e.next=5,a("".concat(j,"search-by-keyword?keyword=").concat(n,"&page=").concat(c));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=function(e){e.filmsLoadingStatus="error"},h=function(e){e.filmsLoadingStatus="loading"},m=Object(o.c)({name:"films",initialState:{films:[],filmInfo:{},filmsLoadingStatus:"null",pageNum:1,searchResult:[],loading:"null"},reducers:{clearArr:function(e,t){e.filmInfo={}}},extraReducers:(c={},Object(r.a)(c,d.pending,h),Object(r.a)(c,d.fulfilled,(function(e,t){e.filmsLoadingStatus="null",e.films=t.payload})),Object(r.a)(c,d.rejected,p),Object(r.a)(c,f.pending,h),Object(r.a)(c,f.fulfilled,(function(e,t){e.filmsLoadingStatus="null",e.filmInfo=t.payload})),Object(r.a)(c,f.rejected,p),Object(r.a)(c,b.pending,(function(e){e.loading="loading"})),Object(r.a)(c,b.fulfilled,(function(e,t){e.loading="null",e.searchResult=t.payload})),Object(r.a)(c,b.rejected,(function(e){e.loading="error"})),Object(r.a)(c,O.pending,h),Object(r.a)(c,O.fulfilled,(function(e,t){e.filmsLoadingStatus="null",e.films=t.payload})),Object(r.a)(c,O.rejected,p),c)});m.actions.clearArr;t.a=m.reducer},28:function(e,t,n){"use strict";n.d(t,"b",(function(){return j}));var c,r=n(4),a=n(6),s=n.n(a),i=n(10),o=n(8),u=n(12),l="https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=",j=Object(o.b)("films/fetchSlider",Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(u.a)(),n=t.request,e.next=3,n("".concat(l,"TOP_250_BEST_FILMS&page=1"));case 3:return e.t0=e.sent,e.next=6,n("".concat(l,"TOP_100_POPULAR_FILMS&page=1"));case 6:return e.t1=e.sent,e.next=9,n("".concat(l,"TOP_AWAIT_FILMS&page=1"));case 9:return e.t2=e.sent,e.abrupt("return",{top250:e.t0,top100:e.t1,topAwait:e.t2});case 11:case"end":return e.stop()}}),e)})))),d=Object(o.c)({name:"slide",initialState:{slide:[],filmsLoadingStatus:"null"},reducers:{},extraReducers:(c={},Object(r.a)(c,j.pending,(function(e){e.filmsLoadingStatus="loading"})),Object(r.a)(c,j.fulfilled,(function(e,t){e.filmsLoadingStatus="null",e.slide=t.payload})),Object(r.a)(c,j.rejected,(function(e){e.filmsLoadingStatus="error"})),c)});t.a=d.reducer},32:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(17),s=n.n(a),i=(n(37),n(38),n(39),n(11)),o=n(3),u=(n(40),n(2)),l=function(){return Object(u.jsxs)("div",{className:"footer",children:["\xa9 ",(new Date).getFullYear()," Copyright Text"]})},j=n(52),d=n(14),f=n(22),b=n(24),O=n(25),p=n(29),h=(n(32),function(){return Object(u.jsx)("div",{className:"serverError",children:Object(u.jsx)("img",{className:"serverErrorImg",src:"https://freefrontend.com/assets/img/500-error-page-html-templates/HTML-CSS-500-Internal-Error-Page.gif",alt:""})})}),m=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(f.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return Object(b.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(u.jsx)(h,{}):this.props.children}}]),n}(c.Component),x=n(9),g=(n(43),n(13)),v=n(16),y=function(){var e=Object(c.useState)("none"),t=Object(x.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(x.a)(a,2),o=s[0],l=s[1],f=Object(c.useState)(!0),b=Object(x.a)(f,2),O=b[0],p=b[1],h=Object(g.b)(),m=Object(g.c)((function(e){return e.allFilms})),y=m.searchResult,k=m.loading,S=Object(c.useRef)(null);Object(c.useEffect)((function(){var e=function(e){return S.current.contains(e.target)||r("none")};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[]);var w=function(e){var t=e.target.value.trim();return l(e.target.value),e.target.value.trim().length>=1?(h(Object(v.d)({category:t,page:1})),p(!1),r("block")):e.target.value.trim().length<=1?(p(!0),r("none")):void 0},N=function(e,t){return"loading"===t?Object(u.jsx)("div",{className:"center",children:Object(u.jsx)(d.a,{})}):"error"===t?Object(u.jsx)("p",{children:"Loading error"}):e.films&&e.films.length>0?e.films.slice(0,5).map((function(e,t){return Object(u.jsxs)(i.b,{to:"/about/".concat(e.filmId),onClick:function(){return r("block")},onBlur:function(){return r("none")},className:"searchItem",children:[Object(u.jsx)("img",{className:"resultImg",src:e.posterUrl,alt:""}),Object(u.jsxs)("div",{className:"searchInfo",children:[Object(u.jsx)("p",{className:"searchTitle",children:e.nameEn}),Object(u.jsx)("span",{className:"searchYear",children:e.year})]})]},t)})):Object(u.jsx)("div",{className:"empty",children:"Nothing found"})}(y,k);return Object(u.jsxs)("div",{className:"searchWrapper",ref:S,children:[Object(u.jsxs)("div",{className:"searchContainer",children:[Object(u.jsx)("input",{onFocus:w,value:o,onChange:w,placeholder:"Search",className:"searchInput",type:"text"}),O?Object(u.jsx)("button",{disabled:!0,className:"searchBtn",children:Object(u.jsx)(j.b,{})}):Object(u.jsx)(i.b,{to:"/films/".concat(o,"/",1),children:Object(u.jsx)("button",{onClick:function(){l(""),p(!0)},className:"searchBtn",children:Object(u.jsx)(j.b,{})})})]}),Object(u.jsx)("div",{className:"searchMenu",style:{display:"".concat(n)},children:N})]})},k=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"appContainer",children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("h1",{className:"logo",children:"React films"}),Object(u.jsx)(y,{}),Object(u.jsx)("ul",{className:"menu",children:Object(u.jsxs)(i.c,{to:"/",className:"menuItem",children:["Home",Object(u.jsx)(j.a,{})]})})]}),Object(u.jsx)("div",{className:"main",children:Object(u.jsx)(c.Suspense,{fallback:Object(u.jsx)(d.a,{}),children:Object(u.jsx)(m,{children:Object(u.jsx)(o.a,{})})})}),Object(u.jsx)(l,{})]})})},S=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,68))})),w=Object(c.lazy)((function(){return Promise.all([n.e(8),n.e(5)]).then(n.bind(null,70))})),N=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,65))})),L=Object(c.lazy)((function(){return Promise.all([n.e(4),n.e(6)]).then(n.bind(null,69))}));var I=function(){return Object(u.jsx)(o.d,{children:Object(u.jsxs)(o.b,{path:"/",element:Object(u.jsx)(k,{}),children:[Object(u.jsx)(o.b,{index:!0,element:Object(u.jsx)(L,{})}),Object(u.jsx)(o.b,{path:"*",element:Object(u.jsx)(N,{})}),Object(u.jsx)(o.b,{path:"/films/:category/:num",element:Object(u.jsx)(S,{})}),Object(u.jsx)(o.b,{path:"/about/:id",element:Object(u.jsx)(w,{})})]})})},C=function(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,67)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},F=n(8),E=n(28),T=Object(F.a)({reducer:{slide:E.a,allFilms:v.a}});window.store=T;var P=T;s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(g.a,{store:P,children:Object(u.jsx)(i.a,{children:Object(u.jsx)(I,{})})})}),document.getElementById("root")),C()}},[[51,1,2]]]);
//# sourceMappingURL=main.94c543fb.chunk.js.map